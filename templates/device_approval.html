{% extends "base.html" %} {% block title %}Device Approval{% endblock %} {% block
body_class %}auth-page{% endblock %} {% block body %}

<div class="home-link-container">
  <a href="{{ url_for('index') }}" class="home-link">&larr; Back to Home</a>
</div>

<div class="auth-container">
  <h1>Approve in ZT-Authenticator</h1>

  <p class="auth-note">
    Open your ZT-Authenticator app and approve the login request to continue.
  </p>

  <div id="approval-status" class="auth-note" style="margin-top: 1rem">
    Waiting for approval...
  </div>
  <div id="approval-countdown" class="auth-note" style="margin-top: 0.5rem">
    Request expires in -- seconds.
  </div>
  <div id="totp-countdown" class="auth-note" style="margin-top: 0.5rem">
    Current TOTP window ends in -- seconds.
  </div>
  <div id="approval-hint" class="auth-note" style="margin-top: 0.5rem">
    Approvals must arrive before the current TOTP code expires.
  </div>

  <div id="approval-error" class="error-message" style="display: none"></div>

  <div class="auth-actions">
    <button id="approval-resend" class="btn btn-secondary" type="button">Resend request</button>
    <button id="approval-cancel" class="btn btn-danger" type="button">Cancel</button>
  </div>
</div>

<script>
  window.__LOGIN_ID__ = "{{ login_id }}";
</script>
<script src="{{ url_for('static', path='js/device_approval.js') }}"></script>

{% endblock %}
